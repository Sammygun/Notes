Ошибки wordpress облако
1 Installation failed: Could not create directory.
chmod -R 777 wp-content/
2 не обновляется 
chmod -R 777 wp-admin/

3 Updating failed. You are probably offline
плагин установить Classic Editor


Site Title sam.linux.of.by название сайта
admin
admin*********
admin@linux.of.by
install wordpress


1 
178.172.136.01 сервер
root / *************
ssh root@178.172.136.01



пользователь 
sam
**************
mysql
root
**********
mysql
sam
************

Создана база данных
Basename
sam.linux.of.by ## домен

###############################

Инструкция reg.ru по шагам 
1 adduser sam # создаю пользователя и пароль

2  usermod -aG sudo sam ## даю права sudo пользователю
перехожу в пользователя sam 
su - sam

3 sudo apt-get update && apt-get upgrade -y ###  y yes автоматом

4 sudo apt-get install nginx ## ставим nginx
помни про команду enable в автозагрузку

5 sudo iptables -A INPUT -p tcp --dport 80 -j ACCEPT
 sudo iptables-save ### открываю порт 80 и сохраняю

6 sudo iptables -A INPUT -p tcp --dport 443 -j ACCEPT
sudo iptables-save ### 443 порт открываю для ssl сертификата

7 ifconfig или ip addr show ### вижу свой ip захожу и должна быть стартовая страница
    
8 sudo apt-get install mysql-server ## ставлю mysql
В процессе установки вам будет предложено ввести пароль root-пользователя (пароль администратора) для MySQL

9 mysql -u root -p ### захожу под root пользователя это не безопасно создаю нового пользователя

CREATE USER 'user-name'@'localhost' IDENTIFIED BY 'password';

CREATE USER 'sam'@'localhost' IDENTIFIED BY 'sam3030034';

- вместо user-name укажите логин пользователя базы данных;
- вместо password укажите пароль нового пользователя.

10 
GRANT ALL PRIVILEGES ON * . * TO 'user-name'@'localhost';
Не забудьте изменить user-name на логин, который был указан при создании пользователя.
GRANT ALL PRIVILEGES ON * . * TO 'sam'@'localhost';
даю все права пользователю


11 чтобы изменения вступили в силу 
FLUSH PRIVILEGES;

CREATE DATABASE BaseName;
создал базу, потом exit; или ctrl + D 


10 установка php
1 sudo apt-get install php-fpm php-mysql
Для Ubuntu 16.04  
sudo nano /etc/php/7.0/fpm/php.ini
Для Ubuntu 18.04
sudo nano /etc/php/7.2/fpm/php.ini

Найдите в файле параметр cgi.fix_pathinfo, раскомментируйте его, убрав точку с запятой перед ним и установите значение «0». В редакторе nano вы можете воспользоваться поиском по файлу клавишей F6.
cgi.fix_pathinfo=0

Для Ubuntu 16.04
sudo systemctl restart php7.0-fpm
Для Ubuntu 18.04
sudo systemctl restart php7.2-fpm


11 Настройка Nginx и связь с PHP
sudo nano /etc/nginx/sites-available/default

В строке, где указана директива index добавьте обработку индексного файла index.php.

    В директиве server_name вы можете указать имя своего домена (если он привязан к серверу) или IP-адрес сервера.

    Раскомментируйте блок location ~\.php$ и строки, которые входят в него, кроме fastcgi_pass 127.0.0.1:9000;. Данный блок отвечает за обработку PHP-запросов.

    Раскомментируйте блок location ~ /\.ht и строку внутри, он отвечает за работу с файлами .htaccess.


sudo nginx -t ### проверка на ошибки после правки конфигов
sudo systemctl reload nginx ## перезагрузка nginx 

Готово. Nginx и связь с PHP настроена. Далее вы можете проверить корректность работы сервера.

sudo bash -c 'echo "<?php phpinfo(); ?>" > /var/www/html/info.php' ### проверка

178.172.136.79/info.php



2 часть установки wordpress https://www.youtube.com/watch?v=Bl2lD22Nlno&list=WL&index=19&t=18s
Установка wordpress на nginx
2.1
sudo nano /etc/nginx/sites-enabled/default
location
#try_files $uri $uri/ =404; ## коментим
 try_files $uri $uri/ /index.php$is_args$args; ## добавил
}

location = /favicon.ico { log_not_found off; access_log off; }
location = /robots.txt { log_not_found off; access_log off; allow all; }
location ~* \.(css|gif|ico|jpeg|jpg|js|png)$ {
expires max;
log_not_found off;
    }
Конфиг после: https://pastebin.com/bBqPt4wJ
как должен выглядить после изменения

2.2 sudo nginx -t #Проверим конфиг nginx на синтаксические ошибки
sudo service nginx restart ## succcess если перезагружаем

2.3  sudo apt-get update
sudo apt-get install php-curl php-gd php-mbstring php-mcrypt php-xml php-xmlrpc
 #Установим модули PHP для корректной работы Wordpress

2.4 wget https://wordpress.org/latest.tar.gz #Скачаем последнюю версию Wordpress
tar xzvf latest.tar.gz #Распакуем скачанный архив
2.5 cp wordpress/wp-config-sample.php wordpress/wp-config.php #Копируем образец конфига в рабочий

2.6 mkdir wordpress/wp-content/upgrade #### для обновлений так как нету файла htacess на nginx

2.7 sudo cp -a wordpress/. /var/www/html/ ## флаг a копируем все файлы с сохранением атрибутов и прав, также копируем не папку а файлы в папке и скрытые файлы также /.

2.8 sudo chown -R sam:www-data /var/www/html
даю права на  пользователя которого ранее создавал

2.9 sudo find /var/www/html -type d -exec chmod g+s {} \;
права на подпапки

3.0 sudo chmod g+w /var/www/html/wp-content
 #Для папки с контентом даём права на запись

3.1sudo chmod -R g+w /var/www/html/wp-content/themes
 #Для папки с контентом, раздел темы даём права на запись

3.2
sudo chmod -R g+w /var/www/html/wp-content/plugins #Для папки с контентом даём права на запись

Итог: права даем на папки wp-content, themes, plugins

3.3 curl -s https://api.wordpress.org/secret-key/1.1/salt/ ## секретные ключи для сервера сохрани себе, для конфигурационного файла wordpress
define('AUTH_KEY',         '=!#yeL*H!&lG:+ula`$ Cp/C@|knR%ynu9IM>M=Nt.qYe}LtVd:=kCDJUTruK W$');
define('SECURE_AUTH_KEY',  'K2.,V3*bbh&_?<gG+F}ljwCAgh/q@b%AuH`_&@A]^5+O%E.c+hoN|8RIi[gki6_H');
define('LOGGED_IN_KEY',    'sjbSyW)R$Mn!9|%<5EC:A--GN|+Ulomh+|>S/Agia+xc;wkpA<t]$9|PJs9hA7I6');
define('NONCE_KEY',        '[|[N)w*ZWx;bG*nX;2-fJ/OQ]0nEr_>9tI) f6G4Qst-p(y9y XjQpt23;5X@7|F');
define('AUTH_SALT',        'MM6A2x:RAui6m64Lhfu(pl#sywMGmJlpz~-4L^s/!| PEDVMJ2+|U6orsjw}NdWT');
define('SECURE_AUTH_SALT', 'JL=aMBmWeb*p:/?KPMECVrvp_(_Q^,pJi7yOV68*$DHt>}71I8!EZ{+j&(kYkqQz');
define('LOGGED_IN_SALT',   'wsoRo1eMrg(;qONMmY54Y_`t 8={neNmiw&UxzJ%+(/ +:+4YDzDeg%hqy$<pxW+');
define('NONCE_SALT',       '),O{QC_r[%AL.x&E#S lb^I+H,hHO[_O{I1dEB@K,gsSO?Wak=N{Z{X6ReipKzBg');

3.4 nano /var/www/html/wp-config.php
Authentication Unique Keys and Salts. # в этом разделе удаляю то что по умолчанию и вcталяю ключи то что выше 

define('AUTH_KEY',         '=!#yeL*H!&lG:+ula`$ Cp/C@|knR%ynu9IM>M=Nt.qYe}LtVd:=kCDJUTruK W$');
define('SECURE_AUTH_KEY',  'K2.,V3*bbh&_?<gG+F}ljwCAgh/q@b%AuH`_&@A]^5+O%E.c+hoN|8RIi[gki6_H');
define('LOGGED_IN_KEY',    'sjbSyW)R$Mn!9|%<5EC:A--GN|+Ulomh+|>S/Agia+xc;wkpA<t]$9|PJs9hA7I6');
define('NONCE_KEY',        '[|[N)w*ZWx;bG*nX;2-fJ/OQ]0nEr_>9tI) f6G4Qst-p(y9y XjQpt23;5X@7|F');
define('AUTH_SALT',        'MM6A2x:RAui6m64Lhfu(pl#sywMGmJlpz~-4L^s/!| PEDVMJ2+|U6orsjw}NdWT');
define('SECURE_AUTH_SALT', 'JL=aMBmWeb*p:/?KPMECVrvp_(_Q^,pJi7yOV68*$DHt>}71I8!EZ{+j&(kYkqQz');
define('LOGGED_IN_SALT',   'wsoRo1eMrg(;qONMmY54Y_`t 8={neNmiw&UxzJ%+(/ +:+4YDzDeg%hqy$<pxW+');
define('NONCE_SALT',       '),O{QC_r[%AL.x&E#S lb^I+H,hHO[_O{I1dEB@K,gsSO?Wak=N{Z{X6ReipKzBg');


3.5 Также в wp-config.php правлю пользователя, базу данных, пароль

define( 'DB_NAME', 'Basename' );

/** MySQL database username */
define( 'DB_USER', 'sam' );

/** MySQL database password */
define( 'DB_PASSWORD', 'sam3030034' );

define('FS_METHOD', 'direct'); #в конце wp-config.php добавляю WP метод обращения к файловой системе


4 установка wordpress через браузер
Site Title sam.linux.of.by название сайта
admin
admin************
admin@linux.of.by
install wordpress

5 
sudo chown -R www-data /var/www/html 
## когда обновляю WordPress временно даем права серверу на данную папку

sudo chown -R sam /var/www/html 
# после применения обновления права можно забрать обратно



Статьи
https://www.digitalocean.com/community/tutorials/how-to-install-linux-nginx-mysql-php-lemp-stack-in-ubuntu-16-04#step-1-install-the-nginx-web-server
LEMP
https://www.digitalocean.com/community/tutorials/how-to-install-wordpress-with-lemp-on-ubuntu-16-04
wordpress lemp
https://www.nginx.com/resources/wiki/start/topics/recipes/wordpress/